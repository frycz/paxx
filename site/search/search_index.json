{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"paxx","text":"<p>A domain-oriented FastAPI project scaffolding CLI.</p> <p>paxx generates production-ready code using well-known libraries (FastAPI, SQLAlchemy async, Pydantic v2, Alembic) directly. No wrapper abstractions, no framework lock-in - just a solid starting point for domain-driven FastAPI applications.</p>"},{"location":"#why-paxx","title":"Why paxx?","text":"<p>Get a well-structured, object-oriented and composable app skeleton that you can build on. Skip the boilerplate setup you've done a hundred times</p>"},{"location":"#philosophy","title":"Philosophy","text":"<ul> <li>No magic - Generated code uses FastAPI, SQLAlchemy, and Pydantic directly</li> <li>No lock-in - After bootstrapping, your project has zero dependency on paxx</li> <li>Domain-driven - Features organized by business capability, not technical layer</li> <li>Production-ready - Includes Docker, migrations, logging, and deployment configs</li> <li>Your code, your rules - The generated structure is a starting point, not a constraint. Reshape it to fit your needs</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code># Install paxx globally\nuv tool install paxx\n\n# Create a new project\npaxx bootstrap myproject\n\n# Navigate and start\ncd myproject\ndocker compose up\n</code></pre> <p>Visit http://127.0.0.1:8000/docs to see your API documentation.</p>"},{"location":"#whats-generated","title":"What's Generated?","text":"<p>When you run <code>paxx bootstrap</code>, you get a fully configured FastAPI project with:</p> <ul> <li>Application factory pattern with async lifespan management</li> <li>Pydantic Settings for type-safe configuration</li> <li>SQLAlchemy async with session management and BaseModel</li> <li>Alembic migrations pre-configured</li> <li>Docker Compose for local development (app + PostgreSQL)</li> <li>Structured logging with JSON and console output formats</li> <li>CORS middleware pre-configured</li> <li>Health check endpoint out of the box</li> <li>Domain-driven structure with a <code>features/</code> directory for business logic</li> </ul>"},{"location":"#core-concepts","title":"Core Concepts","text":""},{"location":"#features","title":"Features","text":"<p>Features are self-contained domain modules under <code>features/</code>. Each feature contains models, schemas, services, and routes for a specific business capability.</p> <pre><code># Create a new feature\npaxx feature create users\n\n# Add a bundled feature\npaxx feature add example_products\n</code></pre>"},{"location":"#infrastructure","title":"Infrastructure","text":"<p>Add new infrastructure components to your application like databases, caching, and object storage.</p> <pre><code>paxx infra add redis      # Redis caching\npaxx infra add storage    # Object storage\n</code></pre>"},{"location":"#extensions","title":"Extensions","text":"<p>Extensions enhance existing infrastructure or add cross-cutting capabilities without introducing new infrastructure components.</p> <pre><code>paxx ext add arq          # Background tasks (requires redis)\n</code></pre>"},{"location":"#deployment","title":"Deployment","text":"<p>Generate deployment configurations for different environments.</p> <pre><code># Add Linux server deployment (Traefik + systemd)\npaxx deploy add linux-server\n</code></pre>"},{"location":"#next","title":"Next","text":"<p>Bootstrap your first project</p>"},{"location":"cli-reference/","title":"CLI Reference","text":""},{"location":"cli-reference/#global-options","title":"Global Options","text":""},{"location":"cli-reference/#paxx-version","title":"<code>paxx --version</code>","text":"<p>Show the paxx version and exit.</p> <pre><code>paxx --version\npaxx -v\n</code></pre>"},{"location":"cli-reference/#project-commands","title":"Project Commands","text":""},{"location":"cli-reference/#paxx-bootstrap","title":"<code>paxx bootstrap</code>","text":"<p>Create a new paxx project with the standard structure.</p> <pre><code>paxx bootstrap &lt;name&gt; [OPTIONS]\n</code></pre> <p>Arguments:</p> Argument Description <code>name</code> Name of the new project. Use <code>.</code> to bootstrap in current directory. <p>Options:</p> Option Description Default <code>-o, --output-dir PATH</code> Directory to create the project in Current directory <code>-d, --description TEXT</code> Project description - <code>-a, --author TEXT</code> Author name \"Author\" <code>-f, --force</code> Skip confirmation prompts (CI-friendly) False <p>Examples:</p> <pre><code>paxx bootstrap myproject\npaxx bootstrap my-api --description \"My awesome API\"\npaxx bootstrap myproject -o /path/to/projects\npaxx bootstrap .                    # Bootstrap in current directory\npaxx bootstrap myproject --force    # Non-interactive mode\n</code></pre>"},{"location":"cli-reference/#paxx-start","title":"<code>paxx start</code>","text":"<p>Start the development server (uvicorn wrapper).</p> <pre><code>paxx start [OPTIONS]\n</code></pre> <p>Options:</p> Option Description Default <code>-h, --host TEXT</code> Host to bind to 127.0.0.1 <code>-p, --port INTEGER</code> Port to bind to 8000 <code>-r, --reload / -R, --no-reload</code> Enable auto-reload Enabled <code>-w, --workers INTEGER</code> Number of workers (only without reload) 1 <p>Examples:</p> <pre><code>paxx start                         # Start on localhost:8000 with reload\npaxx start --port 3000             # Start on port 3000\npaxx start --host 0.0.0.0          # Bind to all interfaces\npaxx start --no-reload --workers 4 # Production-like mode\n</code></pre>"},{"location":"cli-reference/#feature-commands","title":"Feature Commands","text":""},{"location":"cli-reference/#paxx-feature-create","title":"<code>paxx feature create</code>","text":"<p>Create a new domain feature from scratch.</p> <pre><code>paxx feature create &lt;name&gt; [OPTIONS]\n</code></pre> <p>Arguments:</p> Argument Description <code>name</code> Name of the new feature (required) <p>Options:</p> Option Description Default <code>-d, --description TEXT</code> Feature description - <p>Examples:</p> <pre><code>paxx feature create users\npaxx feature create blog_posts\npaxx feature create orders --description \"Order management\"\n</code></pre> <p>Generated Structure:</p> <pre><code>features/&lt;name&gt;/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 config.py      # Feature configuration (prefix, tags)\n\u251c\u2500\u2500 models.py      # SQLAlchemy models\n\u251c\u2500\u2500 schemas.py     # Pydantic schemas\n\u251c\u2500\u2500 services.py    # Business logic\n\u2514\u2500\u2500 routes.py      # API endpoints\n</code></pre>"},{"location":"cli-reference/#paxx-feature-add","title":"<code>paxx feature add</code>","text":"<p>Add a bundled feature to your project.</p> <pre><code>paxx feature add &lt;feature&gt; [OPTIONS]\n</code></pre> <p>Arguments:</p> Argument Description <code>feature</code> Name of the bundled feature to add (required) <p>Options:</p> Option Description Default <code>-f, --force</code> Overwrite existing feature False <p>Available Features:</p> Feature Description <code>example_products</code> Complete CRUD example with e2e tests <p>Examples:</p> <pre><code>paxx feature add example_products  # Add the example CRUD feature\npaxx feature add auth --force      # Overwrite existing auth feature\n</code></pre> <p>When a bundled feature is added: 1. Files are copied to <code>features/&lt;name&gt;/</code> 2. E2E tests are copied to <code>e2e/</code> 3. Router is automatically registered in <code>main.py</code></p>"},{"location":"cli-reference/#paxx-feature-list","title":"<code>paxx feature list</code>","text":"<p>List all available bundled features.</p> <pre><code>paxx feature list\n</code></pre>"},{"location":"cli-reference/#database-commands","title":"Database Commands","text":"<p>All database commands are wrappers around Alembic.</p>"},{"location":"cli-reference/#paxx-db-migrate","title":"<code>paxx db migrate</code>","text":"<p>Create a new database migration.</p> <pre><code>paxx db migrate &lt;message&gt; [OPTIONS]\n</code></pre> <p>Arguments:</p> Argument Description <code>message</code> Migration message describing the changes (required) <p>Options:</p> Option Description Default <code>-a, --autogenerate / -A, --no-autogenerate</code> Auto-detect model changes Enabled <p>Examples:</p> <pre><code>paxx db migrate \"add users table\"\npaxx db migrate \"add email index\" --no-autogenerate\n</code></pre>"},{"location":"cli-reference/#paxx-db-upgrade","title":"<code>paxx db upgrade</code>","text":"<p>Apply migrations to the database.</p> <pre><code>paxx db upgrade [REVISION]\n</code></pre> <p>Arguments:</p> Argument Description Default <code>revision</code> Target revision head (latest) <p>Examples:</p> <pre><code>paxx db upgrade          # Apply all pending migrations\npaxx db upgrade head     # Same as above\npaxx db upgrade +1       # Apply next migration only\npaxx db upgrade abc123   # Migrate to specific revision\n</code></pre>"},{"location":"cli-reference/#paxx-db-downgrade","title":"<code>paxx db downgrade</code>","text":"<p>Revert migrations.</p> <pre><code>paxx db downgrade [REVISION]\n</code></pre> <p>Arguments:</p> Argument Description Default <code>revision</code> Target revision -1 (previous) <p>Examples:</p> <pre><code>paxx db downgrade        # Revert last migration\npaxx db downgrade -1     # Same as above\npaxx db downgrade -2     # Revert last 2 migrations\npaxx db downgrade base   # Revert all migrations\npaxx db downgrade abc123 # Downgrade to specific revision\n</code></pre>"},{"location":"cli-reference/#paxx-db-status","title":"<code>paxx db status</code>","text":"<p>Show current migration status.</p> <pre><code>paxx db status\n</code></pre>"},{"location":"cli-reference/#paxx-db-history","title":"<code>paxx db history</code>","text":"<p>Show migration history.</p> <pre><code>paxx db history [OPTIONS]\n</code></pre> <p>Options:</p> Option Description <code>-v, --verbose</code> Show detailed history"},{"location":"cli-reference/#paxx-db-heads","title":"<code>paxx db heads</code>","text":"<p>Show current available heads (useful for migration branches).</p> <pre><code>paxx db heads\n</code></pre>"},{"location":"cli-reference/#docker-commands","title":"Docker Commands","text":"<p>Docker Compose wrappers for development.</p>"},{"location":"cli-reference/#paxx-docker-up","title":"<code>paxx docker up</code>","text":"<p>Start the development environment.</p> <pre><code>paxx docker up [OPTIONS]\n</code></pre> <p>Options:</p> Option Description Default <code>-d, --detach</code> Run containers in the background False <code>-b, --build</code> Rebuild images before starting False <p>Examples:</p> <pre><code>paxx docker up           # Start in foreground (see logs)\npaxx docker up -d        # Start in background\npaxx docker up --build   # Rebuild and start\n</code></pre>"},{"location":"cli-reference/#paxx-docker-down","title":"<code>paxx docker down</code>","text":"<p>Stop the development environment.</p> <pre><code>paxx docker down [OPTIONS]\n</code></pre> <p>Options:</p> Option Description Default <code>-v, --volumes</code> Remove named volumes (deletes database data) False <p>Examples:</p> <pre><code>paxx docker down         # Stop containers, keep data\npaxx docker down -v      # Stop and delete all data\n</code></pre>"},{"location":"cli-reference/#paxx-docker-build","title":"<code>paxx docker build</code>","text":"<p>Build the Docker images.</p> <pre><code>paxx docker build [OPTIONS]\n</code></pre> <p>Options:</p> Option Description Default <code>--no-cache</code> Build without using cache False <p>Examples:</p> <pre><code>paxx docker build            # Build with cache\npaxx docker build --no-cache # Full rebuild\n</code></pre>"},{"location":"cli-reference/#paxx-docker-logs","title":"<code>paxx docker logs</code>","text":"<p>Show container logs.</p> <pre><code>paxx docker logs [OPTIONS] [SERVICE]\n</code></pre> <p>Arguments:</p> Argument Description Default <code>service</code> Service to show logs for (app, db) All services <p>Options:</p> Option Description Default <code>-f, --follow / -F, --no-follow</code> Follow log output Follow <p>Examples:</p> <pre><code>paxx docker logs         # Follow all logs\npaxx docker logs app     # Follow app logs only\npaxx docker logs -F      # Show logs without following\n</code></pre>"},{"location":"cli-reference/#paxx-docker-ps","title":"<code>paxx docker ps</code>","text":"<p>Show running containers.</p> <pre><code>paxx docker ps\n</code></pre>"},{"location":"cli-reference/#paxx-docker-exec","title":"<code>paxx docker exec</code>","text":"<p>Execute a command in a running container.</p> <pre><code>paxx docker exec [SERVICE] [COMMAND]\n</code></pre> <p>Arguments:</p> Argument Description Default <code>service</code> Service to run command in app <code>command</code> Command to execute bash <p>Examples:</p> <pre><code>paxx docker exec              # Open bash in app container\npaxx docker exec app bash     # Same as above\npaxx docker exec db psql      # Open psql in database container\n</code></pre>"},{"location":"cli-reference/#infrastructure-commands","title":"Infrastructure Commands","text":"<p>Add cross-cutting infrastructure components.</p>"},{"location":"cli-reference/#paxx-infra-add","title":"<code>paxx infra add</code>","text":"<p>Add an infrastructure component to your project.</p> <pre><code>paxx infra add &lt;name&gt; [OPTIONS]\n</code></pre> <p>Arguments:</p> Argument Description <code>name</code> Name of the infrastructure component <p>Options:</p> Option Description Default <code>-f, --force</code> Overwrite existing files False <p>Available Components:</p> Component Description <code>redis</code> Redis caching with async support <code>storage</code> Object storage (S3/MinIO/local) <code>metrics</code> Prometheus metrics and OpenTelemetry tracing <p>Examples:</p> <pre><code>paxx infra add redis     # Add Redis caching\npaxx infra add storage   # Add object storage\npaxx infra add metrics   # Add observability\n</code></pre> <p>When an infrastructure component is added: 1. Templates are rendered to <code>services/</code> 2. Docker service is merged into <code>docker-compose.yml</code> 3. Dependencies are added to <code>pyproject.toml</code> 4. Environment variables are added to <code>settings.py</code> and <code>.env.example</code></p> <p>See Infrastructure for detailed usage.</p>"},{"location":"cli-reference/#paxx-infra-list","title":"<code>paxx infra list</code>","text":"<p>List available infrastructure components.</p> <pre><code>paxx infra list\n</code></pre>"},{"location":"cli-reference/#extension-commands","title":"Extension Commands","text":"<p>Extensions are add-ons that enhance existing infrastructure components. Unlike infrastructure components, they don't add new services but extend functionality of existing ones.</p>"},{"location":"cli-reference/#paxx-ext-add","title":"<code>paxx ext add</code>","text":"<p>Add an extension to your project.</p> <pre><code>paxx ext add &lt;name&gt; [OPTIONS]\n</code></pre> <p>Arguments:</p> Argument Description <code>name</code> Name of the extension to add <p>Options:</p> Option Description Default <code>-f, --force</code> Overwrite existing files False <p>Available Extensions:</p> Extension Description Requires <code>arq</code> Background task queue with ARQ redis <code>websocket</code> WebSocket connections with room support (optional redis) <code>postgis</code> PostGIS geospatial extension - <p>Examples:</p> <pre><code>paxx ext add arq         # Add ARQ task queue (requires redis)\npaxx ext add websocket   # Add WebSocket support\npaxx ext add postgis     # Add PostGIS to postgres\n</code></pre> <p>When an extension is added: 1. Templates are rendered to <code>services/</code> 2. Dependencies are added to <code>pyproject.toml</code> 3. Environment variables are added to <code>settings.py</code> and <code>.env.example</code></p> <p>See Extensions for detailed usage.</p>"},{"location":"cli-reference/#paxx-ext-list","title":"<code>paxx ext list</code>","text":"<p>List available extensions.</p> <pre><code>paxx ext list\n</code></pre>"},{"location":"cli-reference/#deployment-commands","title":"Deployment Commands","text":"<p>Generate deployment configurations.</p>"},{"location":"cli-reference/#paxx-deploy-add","title":"<code>paxx deploy add</code>","text":"<p>Add a deployment configuration to your project.</p> <pre><code>paxx deploy add &lt;type&gt;\n</code></pre> <p>Arguments:</p> Argument Description <code>type</code> Deployment type to add <p>Available Types:</p> Type Description <code>linux-server</code> Traefik + Docker + systemd with SSL <p>Examples:</p> <pre><code>paxx deploy add linux-server\n</code></pre> <p>When a deployment is added: 1. Configuration files are created in <code>deploy/&lt;type&gt;/</code> 2. GitHub Actions workflow is created at <code>.github/workflows/build.yml</code></p> <p>Generated Files (linux-server):</p> <pre><code>deploy/linux-server/\n\u251c\u2500\u2500 deploy.sh              # Main deployment script\n\u251c\u2500\u2500 deploy-init.sh         # Initial server setup\n\u251c\u2500\u2500 deploy-if-changed.sh   # Deploy only if image changed\n\u251c\u2500\u2500 deploy-purge.sh        # Clean up deployment\n\u251c\u2500\u2500 get-status.sh          # Check deployment status\n\u251c\u2500\u2500 server-setup.sh        # Server configuration\n\u251c\u2500\u2500 docker-compose.yml     # Production compose file\n\u251c\u2500\u2500 traefik-dynamic.yml    # Traefik routing config\n\u251c\u2500\u2500 .env.example           # Production env template\n\u251c\u2500\u2500 README.md              # Deployment documentation\n\u2514\u2500\u2500 certs/                 # TLS certificates directory\n\n.github/workflows/\n\u2514\u2500\u2500 build.yml              # CI/CD pipeline\n</code></pre> <p>See Deployment for detailed setup instructions.</p>"},{"location":"deployment/","title":"Deployment","text":"<p>paxx generates 12-factor apps that are deployable to any container platform. The Dockerfile is the universal interface - every platform knows how to run a container.</p>"},{"location":"deployment/#quick-start","title":"Quick Start","text":"<p>Add a deployment configuration to your project:</p> <pre><code>paxx deploy add linux-server\n</code></pre> <p>This generates deployment scripts, Docker Compose configuration, and a CI/CD pipeline.</p>"},{"location":"deployment/#environment-variables","title":"Environment Variables","text":"Variable Required Description <code>DATABASE_URL</code> Yes PostgreSQL connection string <code>SECRET_KEY</code> Yes Cryptographic signing key (min 32 chars) <code>ENVIRONMENT</code> No <code>development</code>, <code>staging</code>, <code>production</code> <code>LOG_LEVEL</code> No DEBUG, INFO, WARNING, ERROR (default: INFO) <code>LOG_FORMAT</code> No <code>json</code> or <code>console</code> (default: json in production) <p>Generate a secret key:</p> <pre><code>python -c \"import secrets; print(secrets.token_urlsafe(32))\"\n</code></pre>"},{"location":"deployment/#building-the-container","title":"Building the Container","text":"<pre><code>docker build -t myapp .\n</code></pre> <p>The generated Dockerfile uses a multi-stage build for minimal image size.</p>"},{"location":"deployment/#health-checks","title":"Health Checks","text":"<p>The app exposes <code>/health</code> which returns:</p> <ul> <li><code>200 OK</code> when healthy</li> <li><code>503 Service Unavailable</code> when database is unreachable</li> </ul> <p>Configure your platform's liveness/readiness probes to hit this endpoint.</p>"},{"location":"deployment/#database-migrations","title":"Database Migrations","text":""},{"location":"deployment/#local","title":"Local","text":"<pre><code>docker compose exec app paxx db upgrade\n</code></pre>"},{"location":"deployment/#in-production","title":"In Production","text":"<p>Access production environment, eg.:</p> <pre><code># SSH into server\nssh user@server\ncd /opt/myapp\n</code></pre> <p>Execute the same command as during local development:</p> <pre><code>docker compose exec app paxx db upgrade\n</code></pre>"},{"location":"deployment/#rollback","title":"Rollback","text":"<pre><code>paxx db downgrade       # Revert last migration\npaxx db downgrade -2    # Revert last 2 migrations\npaxx db downgrade abc123  # Downgrade to specific revision\n</code></pre>"},{"location":"deployment/#backwards-compatible-migrations","title":"Backwards-Compatible Migrations","text":"<p>For zero-downtime deploys, migrations should be backwards-compatible:</p> <ul> <li>Add nullable columns, not required ones</li> <li>Add new tables before removing old ones</li> <li>Use multi-phase migrations for breaking changes:</li> <li>Deploy: add new column (nullable)</li> <li>Backfill data</li> <li>Deploy: code uses new column</li> <li>Deploy: remove old column</li> </ul>"},{"location":"deployment/#linux-server-deployment","title":"Linux Server Deployment","text":"<p>Add the deployment configuration:</p> <pre><code>paxx deploy add linux-server\n</code></pre>"},{"location":"deployment/#generated-files","title":"Generated Files","text":"<pre><code>deploy/linux-server/\n\u251c\u2500\u2500 deploy.sh              # Main deployment script\n\u251c\u2500\u2500 deploy-init.sh         # Initial server setup\n\u251c\u2500\u2500 deploy-if-changed.sh   # Deploy only if image changed\n\u251c\u2500\u2500 deploy-purge.sh        # Clean up deployment\n\u251c\u2500\u2500 get-status.sh          # Check deployment status\n\u251c\u2500\u2500 server-setup.sh        # Server configuration\n\u251c\u2500\u2500 docker-compose.yml     # Production compose file\n\u251c\u2500\u2500 traefik-dynamic.yml    # Traefik routing config\n\u251c\u2500\u2500 .env.example           # Production env template\n\u251c\u2500\u2500 README.md              # Deployment documentation\n\u2514\u2500\u2500 certs/                 # TLS certificates directory\n\n.github/workflows/\n\u2514\u2500\u2500 build.yml              # CI/CD pipeline\n</code></pre>"},{"location":"deployment/#setup-process","title":"Setup Process","text":"<ol> <li>Configure environment:</li> </ol> <pre><code>cp deploy/linux-server/.env.example deploy/linux-server/.env\n# Edit .env with your production values\n</code></pre> <ol> <li>Push to GitHub:</li> </ol> <pre><code>git add .\ngit commit -m \"Add deployment configuration\"\ngit push\n</code></pre> <ol> <li>Create a release tag:</li> </ol> <pre><code>git tag v1.0.0\ngit push origin v1.0.0\n</code></pre> <p>This triggers the GitHub Actions build workflow.</p> <ol> <li>Initial server deployment: <pre><code>./deploy/linux-server/deploy-init.sh user@your-server\n</code></pre></li> </ol>"},{"location":"deployment/#architecture","title":"Architecture","text":"<p>The linux-server deployment uses:</p> <ul> <li>Traefik - Reverse proxy with automatic HTTPS</li> <li>Docker Compose - Container orchestration</li> <li>systemd - Process management and auto-restart</li> <li>GitHub Actions - CI/CD pipeline</li> </ul>"},{"location":"deployment/#server-requirements","title":"Server Requirements","text":"<ul> <li>Ubuntu 22.04+ or Debian 12+</li> <li>Docker and Docker Compose installed</li> <li>SSH access with key-based authentication</li> <li>Domain name pointing to server IP</li> </ul>"},{"location":"deployment/#tls-certificates","title":"TLS Certificates","text":"<p>Place your certificates in <code>deploy/linux-server/certs/</code>:</p> <pre><code>certs/\n\u251c\u2500\u2500 cert.pem      # Full certificate chain\n\u2514\u2500\u2500 key.pem       # Private key\n</code></pre> <p>Or use Let's Encrypt with Traefik's automatic certificate management.</p>"},{"location":"deployment/#deployment-commands","title":"Deployment Commands","text":"<pre><code># Initial deployment to a new server\n./deploy/linux-server/deploy-init.sh user@server\n\n# Standard deployment (pulls and restarts)\n./deploy/linux-server/deploy.sh user@server\n\n# Deploy only if image has changed\n./deploy/linux-server/deploy-if-changed.sh user@server\n\n# Check deployment status\n./deploy/linux-server/get-status.sh user@server\n\n# Remove deployment completely\n./deploy/linux-server/deploy-purge.sh user@server\n</code></pre>"},{"location":"deployment/#cicd-pipeline","title":"CI/CD Pipeline","text":"<p>The generated <code>.github/workflows/build.yml</code> provides:</p> <ol> <li>Build - Creates Docker image on tag push</li> <li>Push - Pushes to GitHub Container Registry</li> <li>Deploy - Optionally triggers deployment</li> </ol>"},{"location":"deployment/#triggering-builds","title":"Triggering Builds","text":"<p>Builds are triggered by version tags:</p> <pre><code>git tag v1.0.0\ngit push origin v1.0.0\n</code></pre>"},{"location":"deployment/#github-secrets","title":"GitHub Secrets","text":"<p>Configure these secrets in your repository:</p> Secret Description <code>DEPLOY_HOST</code> Server hostname or IP <code>DEPLOY_USER</code> SSH username <code>DEPLOY_KEY</code> SSH private key"},{"location":"deployment/#scaling","title":"Scaling","text":"<p>The production Dockerfile runs uvicorn with multiple workers:</p> <pre><code>CMD [\"uvicorn\", \"main:app\", \"--host\", \"0.0.0.0\", \"--workers\", \"4\"]\n</code></pre> <p>Adjust workers based on CPU cores (2 * cores + 1 is a common formula).</p> <p>For horizontal scaling, run multiple container instances behind a load balancer.</p>"},{"location":"deployment/#platform-specific-examples","title":"Platform-Specific Examples","text":""},{"location":"deployment/#flyio","title":"Fly.io","text":"<pre><code># Create app\nfly launch --no-deploy\n\n# Create and attach Postgres\nfly postgres create\nfly postgres attach\n\n# Run migrations\nfly ssh console -C \"paxx db upgrade\"\n\n# Deploy\nfly deploy\n</code></pre>"},{"location":"deployment/#railway","title":"Railway","text":"<ol> <li>Create project with Postgres addon</li> <li><code>DATABASE_URL</code> is automatically set from the addon</li> <li>Deploy via GitHub or <code>railway up</code></li> <li>Run migrations: <code>railway run paxx db upgrade</code></li> </ol>"},{"location":"deployment/#aws-ecs","title":"AWS ECS","text":"<ol> <li>Push image to ECR</li> <li>Create task definition with environment variables</li> <li>Run migration as one-off task before deploying</li> <li>Update service with new task definition</li> </ol>"},{"location":"deployment/#generic-docker-host","title":"Generic Docker Host","text":"<pre><code># Build and push\ndocker build -t myregistry/myapp:latest .\ndocker push myregistry/myapp:latest\n\n# On server\ndocker pull myregistry/myapp:latest\ndocker run -d \\\n  -e DATABASE_URL=\"postgresql://...\" \\\n  -e SECRET_KEY=\"...\" \\\n  -p 8000:8000 \\\n  myregistry/myapp:latest\n</code></pre>"},{"location":"deployment/#monitoring","title":"Monitoring","text":""},{"location":"deployment/#logs","title":"Logs","text":"<p>View application logs:</p> <pre><code># Local development\ndocker compose logs -f app\n\n# Production (linux-server)\nssh user@server\ncd /opt/myapp\ndocker compose logs -f app\n</code></pre>"},{"location":"deployment/#health-status","title":"Health Status","text":"<pre><code>curl https://your-domain.com/health\n</code></pre>"},{"location":"deployment/#metrics","title":"Metrics","text":"<p>Add the metrics infrastructure component for Prometheus and OpenTelemetry:</p> <pre><code>paxx infra add metrics\n</code></pre> <p>See Infrastructure for details.</p>"},{"location":"deployment/#next-steps","title":"Next Steps","text":"<p>Read the CLI Reference for all available commands</p>"},{"location":"extensions/","title":"Extensions","text":"<p>Extensions are add-ons that enhance existing infrastructure.</p>"},{"location":"extensions/#overview","title":"Overview","text":"<pre><code># List available extensions\npaxx ext list\n\n# Add an extension\npaxx ext add &lt;name&gt;\n</code></pre> <p>When you add an extension, paxx:</p> <ol> <li>Renders templates to <code>services/</code></li> <li>Adds dependencies to <code>pyproject.toml</code></li> <li>Adds environment variables to <code>settings.py</code> and <code>.env.example</code></li> </ol>"},{"location":"extensions/#arq-background-tasks","title":"ARQ (Background Tasks)","text":"<p>Background task queue using ARQ (async Redis queue).</p> <pre><code>paxx ext add arq\n</code></pre>"},{"location":"extensions/#prerequisites","title":"Prerequisites","text":"<p>Redis must be configured. Run <code>paxx infra add redis</code> first.</p>"},{"location":"extensions/#generated-files","title":"Generated Files","text":"<ul> <li><code>services/arq.py</code> - ARQ client and task enqueueing</li> <li><code>v/tasks.py</code> - Worker settings and task definitions</li> </ul>"},{"location":"extensions/#environment-variables","title":"Environment Variables","text":"Variable Default Description <code>ARQ_REDIS_URL</code> <code>redis://localhost:6379/1</code> Redis URL for task queue <code>ARQ_MAX_JOBS</code> <code>10</code> Maximum concurrent jobs <code>ARQ_JOB_TIMEOUT</code> <code>300</code> Job timeout in seconds"},{"location":"extensions/#usage","title":"Usage","text":"<p>Define tasks in <code>services/tasks.py</code>:</p> <pre><code>async def send_welcome_email(ctx, user_id: int):\n    \"\"\"Send welcome email to a new user.\"\"\"\n    print(f\"Sending welcome email to user {user_id}\")\n\nclass WorkerSettings:\n    functions = [send_welcome_email]\n    redis_settings = RedisSettings.from_dsn(settings.arq_redis_url)\n</code></pre> <p>Enqueue tasks from your code:</p> <pre><code>from services.arq import enqueue\n\n# Enqueue a task\nawait enqueue(\"send_welcome_email\", user_id=123)\n\n# With delay\nawait enqueue(\"send_reminder\", user_id=123, _defer_by=timedelta(hours=24))\n</code></pre>"},{"location":"extensions/#running-the-worker","title":"Running the Worker","text":"<pre><code>uv run arq services.tasks.WorkerSettings\n</code></pre>"},{"location":"extensions/#dependency","title":"Dependency","text":"<ul> <li><code>arq&gt;=0.26</code></li> </ul>"},{"location":"extensions/#websocket","title":"WebSocket","text":"<p>WebSocket connection manager with room support and optional Redis pub/sub for multi-instance scaling.</p> <pre><code>paxx ext add websocket\n</code></pre>"},{"location":"extensions/#generated-files_1","title":"Generated Files","text":"<ul> <li><code>services/ws.py</code> - WebSocket manager with room support</li> </ul>"},{"location":"extensions/#environment-variables_1","title":"Environment Variables","text":"Variable Default Description <code>WS_REDIS_URL</code> - Redis URL for multi-instance pub/sub <code>WS_HEARTBEAT_INTERVAL</code> <code>30</code> Heartbeat interval in seconds"},{"location":"extensions/#usage_1","title":"Usage","text":"<p>Basic WebSocket endpoint:</p> <pre><code>from fastapi import WebSocket, WebSocketDisconnect\nfrom services.ws import manager\n\n@app.websocket(\"/ws/{client_id}\")\nasync def websocket_endpoint(websocket: WebSocket, client_id: str):\n    await manager.connect(websocket, client_id)\n    try:\n        while True:\n            data = await websocket.receive_text()\n            await manager.broadcast(data)\n    except WebSocketDisconnect:\n        manager.disconnect(client_id)\n</code></pre> <p>Room support:</p> <pre><code># Join a room\nawait manager.join_room(client_id, \"chat-room\")\n\n# Send to room\nawait manager.broadcast_to_room(\"chat-room\", {\"message\": \"Hello!\"})\n\n# Leave room\nawait manager.leave_room(client_id, \"chat-room\")\n</code></pre>"},{"location":"extensions/#multi-instance-mode","title":"Multi-Instance Mode","text":"<p>For running multiple app instances behind a load balancer:</p> <ol> <li>Set <code>WS_REDIS_URL</code> environment variable</li> <li>Start pub/sub in your app lifespan:</li> </ol> <pre><code>@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    await manager.start_pubsub()\n    yield\n    await manager.stop_pubsub()\n</code></pre>"},{"location":"extensions/#dependencies","title":"Dependencies","text":"<p>No additional dependencies (uses existing FastAPI WebSocket support).</p>"},{"location":"extensions/#postgis","title":"PostGIS","text":"<p>PostGIS geospatial extension for PostgreSQL, enabling location-based queries.</p> <pre><code>paxx ext add postgis\n</code></pre>"},{"location":"extensions/#what-it-does","title":"What It Does","text":"<ul> <li>Upgrades your PostgreSQL image to <code>postgis/postgis</code></li> <li>Adds GeoAlchemy2 for SQLAlchemy integration</li> <li>Provides helper functions for common geospatial queries</li> </ul>"},{"location":"extensions/#generated-files_2","title":"Generated Files","text":"<ul> <li><code>services/geo.py</code> - Geography types and query helpers</li> </ul>"},{"location":"extensions/#usage_2","title":"Usage","text":"<p>Define location fields in models:</p> <pre><code>from services.geo import Geography\nfrom sqlalchemy.orm import Mapped, mapped_column\n\nclass Location(Base):\n    __tablename__ = \"locations\"\n\n    id: Mapped[int] = mapped_column(primary_key=True)\n    name: Mapped[str]\n    location: Mapped[Geography] = mapped_column(\n        Geography(geometry_type=\"POINT\", srid=4326),\n        index=True,  # Creates GIST index\n    )\n</code></pre> <p>Query helpers:</p> <pre><code>from services.geo import distance_within, bbox_filter, distance_meters\n\n# Find locations within 100 meters of a point\nstmt = select(Location).where(\n    distance_within(Location.location, lat=52.52, lng=13.4, radius_meters=100)\n)\n\n# Viewport/bounding box query\nstmt = select(Location).where(\n    bbox_filter(Location.location, west=13.0, south=52.0, east=14.0, north=53.0)\n)\n\n# Calculate distance between points\nstmt = select(\n    Location,\n    distance_meters(Location.location, lat=52.52, lng=13.4).label(\"distance\")\n).order_by(\"distance\")\n</code></pre>"},{"location":"extensions/#important","title":"Important","text":"<p>After adding PostGIS, restart your database:</p> <pre><code>docker compose down &amp;&amp; docker compose up -d\n</code></pre>"},{"location":"extensions/#dependencies_1","title":"Dependencies","text":"<ul> <li><code>geoalchemy2&gt;=0.14</code></li> </ul>"},{"location":"extensions/#summary","title":"Summary","text":"Extension Purpose Requires Key Files arq Background tasks redis <code>services/arq.py</code>, <code>services/tasks.py</code> websocket Real-time connections (optional redis) <code>services/ws.py</code> postgis Geospatial queries - <code>services/geo.py</code>"},{"location":"extensions/#best-practices","title":"Best Practices","text":"<ol> <li>Check prerequisites - Some extensions require infrastructure components (e.g., ARQ requires Redis)</li> <li>Development vs Production - Configure production services separately from local development</li> <li>Environment variables - Always configure production values via environment variables</li> <li>Dependencies - Run <code>uv sync</code> after adding extensions to install new dependencies</li> </ol>"},{"location":"extensions/#next-steps","title":"Next Steps","text":"<p>Set up Deployment for production</p>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.12+</li> <li>uv package manager (recommended) or pip</li> <li>Docker and Docker Compose</li> </ul>"},{"location":"getting-started/#installation","title":"Installation","text":"<pre><code>uv tool install paxx\n</code></pre>"},{"location":"getting-started/#create-your-first-project","title":"Create Your First Project","text":"<pre><code>paxx bootstrap myproject\n</code></pre> <p>This creates a new directory <code>myproject/</code> with the complete project structure.</p>"},{"location":"getting-started/#bootstrap-options","title":"Bootstrap Options","text":"<pre><code># With a description\npaxx bootstrap myproject --description \"My awesome API\"\n\n# With author name\npaxx bootstrap myproject --author \"Your Name\"\n\n# In a specific directory\npaxx bootstrap myproject --output-dir /path/to/projects\n\n# Bootstrap in current directory\npaxx bootstrap .\n\n# Skip confirmation prompts (CI-friendly)\npaxx bootstrap myproject --force\n</code></pre>"},{"location":"getting-started/#start-the-development-environment","title":"Start the Development Environment","text":"<pre><code>cd myproject\ndocker compose up\n</code></pre> <p>This starts both the application and PostgreSQL database. The app runs with hot-reload enabled.</p> <p>Your API is now running at http://127.0.0.1:8000.</p> <ul> <li>API Documentation: http://127.0.0.1:8000/docs (Swagger UI)</li> <li>Alternative docs: http://127.0.0.1:8000/redoc (ReDoc)</li> <li>Health check: http://127.0.0.1:8000/health</li> </ul>"},{"location":"getting-started/#create-your-first-feature","title":"Create Your First Feature","text":"<p>Features are domain modules that contain your business logic. Create one with:</p> <pre><code>uv run paxx feature create users\n</code></pre> <p>This generates:</p> <pre><code>features/users/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 config.py      # Router prefix and tags\n\u251c\u2500\u2500 models.py      # SQLAlchemy models\n\u251c\u2500\u2500 schemas.py     # Pydantic schemas\n\u251c\u2500\u2500 services.py    # Business logic\n\u2514\u2500\u2500 routes.py      # API endpoints\n</code></pre>"},{"location":"getting-started/#set-up-the-database","title":"Set Up the Database","text":"<p>After defining your models, create and apply migrations:</p> <pre><code># Create a migration\nuv run paxx db migrate \"add users table\"\n\n# Apply the migration\nuv run paxx db upgrade\n</code></pre>"},{"location":"getting-started/#add-infrastructure-optional","title":"Add Infrastructure (Optional)","text":"<p>Add infrastructure components as needed:</p> <pre><code>uv run paxx infra list           # List all available components\n\nuv run paxx infra add redis      # Redis caching\nuv run paxx infra add storage    # Object storage (S3/local)\n</code></pre>"},{"location":"getting-started/#add-extensions-optional","title":"Add extensions (Optional)","text":"<p>Add extensions:</p> <pre><code># Extensions (enhances existing infrastructure)\nuv run paxx ext list             # List all available extensions\n\nuv run paxx ext add arq          # Background tasks (requires redis)\nuv run paxx ext add websocket    # WebSocket support\n</code></pre>"},{"location":"getting-started/#project-structure-overview","title":"Project Structure Overview","text":"<pre><code>myproject/\n\u251c\u2500\u2500 main.py              # Application entry point\n\u251c\u2500\u2500 settings.py          # Configuration\n\u251c\u2500\u2500 docker-compose.yml   # Development environment\n\u251c\u2500\u2500 core/                # Shared utilities\n\u251c\u2500\u2500 db/                  # Database setup &amp; migrations\n\u251c\u2500\u2500 features/            # Domain features\n\u251c\u2500\u2500 services/            # Global features\n\u2514\u2500\u2500 e2e/                 # End-to-end tests\n</code></pre> <p>See Project Structure for detailed documentation.</p>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Understand the Project Structure</li> <li>Follow the Tutorial to build a complete feature</li> <li>Add additional Infrastructure like storage, caching, etc.</li> <li>Extend exisitng app with websockets support, postGIS and more</li> <li>Set up Deployment for production</li> <li>Read the CLI Reference for all available commands</li> </ul>"},{"location":"infrastructure/","title":"Infrastructure","text":"<p>Infrastructure components add system capabilities like caching, object storage, and observability to your paxx project.</p> <p>For add-ons that enhance existing infrastructure, see Extensions.</p>"},{"location":"infrastructure/#overview","title":"Overview","text":"<pre><code>paxx infra list           # List available components\npaxx infra add &lt;name&gt;     # Add a component\n</code></pre> <p>When you add an infrastructure component, paxx:</p> <ol> <li>Renders templates to <code>services/</code> (e.g., <code>services/cache.py</code>)</li> <li>Merges Docker services into <code>docker-compose.yml</code></li> <li>Adds dependencies to <code>pyproject.toml</code></li> <li>Adds environment variables to <code>settings.py</code> and <code>.env.example</code></li> </ol>"},{"location":"infrastructure/#redis","title":"Redis","text":"<p>Async Redis client for caching and pub/sub.</p> <pre><code>paxx infra add redis\n</code></pre>"},{"location":"infrastructure/#generated-files","title":"Generated Files","text":"<ul> <li><code>services/cache.py</code> - Redis client and caching utilities</li> </ul>"},{"location":"infrastructure/#environment-variables","title":"Environment Variables","text":"Variable Default Description <code>REDIS_URL</code> <code>redis://localhost:6379/0</code> Redis connection URL"},{"location":"infrastructure/#docker-service","title":"Docker Service","text":"<p>Adds Redis 7 Alpine to <code>docker-compose.yml</code>.</p>"},{"location":"infrastructure/#usage","title":"Usage","text":"<pre><code>from services.cache import cache_get, cache_set, cache_delete, get_redis\n\n# Simple caching\nawait cache_set(\"user:123\", {\"name\": \"John\"}, expire=3600)\nuser = await cache_get(\"user:123\")\nawait cache_delete(\"user:123\")\n\n# Direct Redis access\nredis = await get_redis()\nawait redis.incr(\"page_views\")\n</code></pre>"},{"location":"infrastructure/#dependency","title":"Dependency","text":"<ul> <li><code>redis&gt;=5.0</code></li> </ul>"},{"location":"infrastructure/#storage","title":"Storage","text":"<p>Object storage supporting local filesystem and S3-compatible backends (AWS S3, MinIO).</p> <pre><code>paxx infra add storage\n</code></pre>"},{"location":"infrastructure/#generated-files_1","title":"Generated Files","text":"<ul> <li><code>services/storage.py</code> - Storage abstraction and backends</li> </ul>"},{"location":"infrastructure/#environment-variables_1","title":"Environment Variables","text":"Variable Default Description <code>STORAGE_BACKEND</code> <code>local</code> Storage backend (<code>local</code> or <code>s3</code>) <code>STORAGE_LOCAL_PATH</code> <code>./uploads</code> Local storage path <code>STORAGE_S3_BUCKET</code> - S3 bucket name <code>STORAGE_S3_REGION</code> <code>us-east-1</code> S3 region <code>STORAGE_S3_ENDPOINT_URL</code> - Custom S3 endpoint (for MinIO) <code>STORAGE_S3_ACCESS_KEY</code> - S3 access key <code>STORAGE_S3_SECRET_KEY</code> - S3 secret key"},{"location":"infrastructure/#docker-service_1","title":"Docker Service","text":"<p>Adds MinIO service for local S3-compatible testing.</p>"},{"location":"infrastructure/#usage_1","title":"Usage","text":"<pre><code>from services.storage import get_storage\n\nstorage = get_storage()\n\n# Upload a file\nurl = await storage.upload(\"images/photo.jpg\", file_data)\n\n# Download a file\ndata = await storage.download(\"images/photo.jpg\")\n\n# Delete a file\nawait storage.delete(\"images/photo.jpg\")\n\n# Check if file exists\nexists = await storage.exists(\"images/photo.jpg\")\n</code></pre>"},{"location":"infrastructure/#minio-testing","title":"MinIO Testing","text":"<ol> <li> <p>Start MinIO:    <pre><code>docker compose up -d minio\n</code></pre></p> </li> <li> <p>Open console at http://localhost:9001</p> </li> <li>Username: <code>minioadmin</code></li> <li> <p>Password: <code>minioadmin</code></p> </li> <li> <p>Create a bucket</p> </li> <li> <p>Configure environment:    <pre><code>STORAGE_BACKEND=s3\nSTORAGE_S3_BUCKET=my-bucket\nSTORAGE_S3_ENDPOINT_URL=http://localhost:9000\nSTORAGE_S3_ACCESS_KEY=minioadmin\nSTORAGE_S3_SECRET_KEY=minioadmin\n</code></pre></p> </li> </ol>"},{"location":"infrastructure/#dependencies","title":"Dependencies","text":"<ul> <li><code>aioboto3&gt;=13.0</code></li> <li><code>aiofiles&gt;=24.0</code></li> </ul>"},{"location":"infrastructure/#metrics","title":"Metrics","text":"<p>Prometheus metrics and OpenTelemetry distributed tracing.</p> <pre><code>paxx infra add metrics\n</code></pre>"},{"location":"infrastructure/#generated-files_2","title":"Generated Files","text":"<ul> <li><code>services/metrics.py</code> - Prometheus metrics setup</li> <li><code>services/tracing.py</code> - OpenTelemetry tracing setup</li> </ul>"},{"location":"infrastructure/#environment-variables_2","title":"Environment Variables","text":"Variable Default Description <code>OTEL_SERVICE_NAME</code> <code>myapp</code> Service name for tracing <code>OTEL_EXPORTER_OTLP_ENDPOINT</code> <code>http://localhost:4317</code> OTLP endpoint <code>METRICS_ENABLED</code> <code>true</code> Enable/disable metrics"},{"location":"infrastructure/#docker-service_2","title":"Docker Service","text":"<p>Adds Jaeger for local trace visualization.</p>"},{"location":"infrastructure/#prometheus-metrics","title":"Prometheus Metrics","text":"<pre><code>from services.metrics import (\n    REQUEST_COUNT,\n    REQUEST_LATENCY,\n    ACTIVE_REQUESTS,\n)\n\n# Metrics are automatically collected via middleware\n# Access at /metrics endpoint\n</code></pre> <p>Built-in metrics: - <code>http_requests_total</code> - Total HTTP requests (labels: method, path, status) - <code>http_request_duration_seconds</code> - Request latency histogram - <code>http_requests_in_progress</code> - Currently processing requests</p>"},{"location":"infrastructure/#opentelemetry-tracing","title":"OpenTelemetry Tracing","text":"<p>Automatic instrumentation for: - FastAPI requests - SQLAlchemy queries - HTTP client requests</p> <p>View traces in Jaeger:</p> <pre><code>docker compose up -d jaeger\n# Open http://localhost:16686\n</code></pre>"},{"location":"infrastructure/#custom-spans","title":"Custom Spans","text":"<pre><code>from services.tracing import get_tracer\n\ntracer = get_tracer(__name__)\n\nasync def process_order(order_id: int):\n    with tracer.start_as_current_span(\"process_order\") as span:\n        span.set_attribute(\"order.id\", order_id)\n        # Your logic here\n</code></pre>"},{"location":"infrastructure/#dependencies_1","title":"Dependencies","text":"<ul> <li><code>opentelemetry-api&gt;=1.20</code></li> <li><code>opentelemetry-sdk&gt;=1.20</code></li> <li><code>opentelemetry-instrumentation-fastapi&gt;=0.41b0</code></li> <li><code>opentelemetry-instrumentation-sqlalchemy&gt;=0.41b0</code></li> <li><code>opentelemetry-exporter-otlp&gt;=1.20</code></li> <li><code>prometheus-client&gt;=0.19</code></li> </ul>"},{"location":"infrastructure/#summary","title":"Summary","text":"Component Purpose Docker Service Key Files redis Caching, pub/sub Redis <code>services/cache.py</code> storage Object storage MinIO <code>services/storage.py</code> metrics Observability Jaeger <code>services/metrics.py</code>, <code>coservicesre/tracing.py</code> <p>See also: Extensions for add-ons like ARQ, WebSocket, and PostGIS.</p>"},{"location":"infrastructure/#best-practices","title":"Best Practices","text":"<ol> <li>Start with what you need - Add components as requirements emerge</li> <li>Development vs Production - Docker services are for local development; configure production services separately</li> <li>Environment variables - Always configure production values via environment variables, not in code</li> <li>Dependencies - Run <code>uv sync</code> after adding infrastructure to install new dependencies</li> </ol>"},{"location":"infrastructure/#next-steps","title":"Next Steps","text":"<p>Extend exisitng app with websockets support, postGIS and more</p>"},{"location":"project-structure/","title":"Project Structure","text":"<p>When you run <code>paxx bootstrap myproject</code>, the following structure is created:</p> <pre><code>myproject/\n\u251c\u2500\u2500 main.py                  # Application entry point &amp; factory\n\u251c\u2500\u2500 settings.py              # Configuration (Pydantic Settings)\n\u251c\u2500\u2500 conftest.py              # Root pytest fixtures\n\u251c\u2500\u2500 alembic.ini              # Alembic configuration\n\u251c\u2500\u2500 pyproject.toml           # Project dependencies\n\u251c\u2500\u2500 Makefile                 # Common development commands\n\u251c\u2500\u2500 .env                     # Environment variables (git-ignored)\n\u251c\u2500\u2500 .env.example             # Example environment variables\n\u251c\u2500\u2500 .gitignore               # Git ignore rules\n\u251c\u2500\u2500 README.md                # Project readme\n\u251c\u2500\u2500 DEPLOY.md                # Deployment documentation\n\u2502\n\u251c\u2500\u2500 Dockerfile               # Production container image\n\u251c\u2500\u2500 Dockerfile.dev           # Development container image\n\u251c\u2500\u2500 docker-compose.yml       # Development environment\n\u251c\u2500\u2500 .dockerignore            # Docker build exclusions\n\u2502\n\u251c\u2500\u2500 core/                    # Core utilities\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 logging.py           # Structured logging configuration\n\u2502   \u251c\u2500\u2500 exceptions.py        # Custom exceptions &amp; handlers\n\u2502   \u251c\u2500\u2500 middleware.py        # Custom middleware\n\u2502   \u251c\u2500\u2500 dependencies.py      # FastAPI dependencies\n\u2502   \u2514\u2500\u2500 schemas.py           # Shared Pydantic schemas\n\u2502\n\u251c\u2500\u2500 db/                      # Database\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 database.py          # Async SQLAlchemy setup\n\u2502   \u2514\u2500\u2500 migrations/          # Alembic migrations\n\u2502       \u251c\u2500\u2500 env.py           # Alembic environment\n\u2502       \u251c\u2500\u2500 script.py.mako   # Migration template\n\u2502       \u2514\u2500\u2500 versions/        # Migration files\n\u2502\n\u251c\u2500\u2500 features/                # Domain features\n\u2502   \u2514\u2500\u2500 health/              # Built-in health check\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u2514\u2500\u2500 routes.py\n\u2502\n\u251c\u2500\u2500 e2e/                     # End-to-end tests\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 conftest.py          # Test fixtures\n\u2502   \u2514\u2500\u2500 test_health.py       # Health endpoint tests\n\u2502\n\u2514\u2500\u2500 deploy/                  # Deployment configs\n    \u2514\u2500\u2500 README.md            # Instructions for adding deployments\n</code></pre> <p>This structure is a starting point, not a constraint. Feel free to reorganize directories, rename modules, or reshape the architecture to fit your project's needs. After bootstrapping, the code is entirely yours.</p>"},{"location":"project-structure/#key-files","title":"Key Files","text":""},{"location":"project-structure/#mainpy","title":"<code>main.py</code>","text":"<p>The application entry point using the factory pattern with async lifespan:</p> <pre><code>from contextlib import asynccontextmanager\nfrom fastapi import FastAPI\n\n@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    # Startup: validate database connection\n    if not await verify_database_connection():\n        sys.exit(1)\n    yield\n    # Shutdown: close connections\n    await close_db()\n\ndef create_app() -&gt; FastAPI:\n    app = FastAPI(\n        title=settings.app_name,\n        debug=settings.debug,\n        lifespan=lifespan,\n    )\n\n    # Register exception handlers\n    register_exception_handlers(app)\n\n    # Register middleware\n    register_middleware(app)\n\n    # Configure CORS\n    app.add_middleware(CORSMiddleware, ...)\n\n    # Register routers\n    app.include_router(health_router, tags=[\"health\"])\n\n    return app\n\napp = create_app()\n</code></pre>"},{"location":"project-structure/#settingspy","title":"<code>settings.py</code>","text":"<p>Type-safe configuration using Pydantic Settings:</p> <pre><code>from pydantic_settings import BaseSettings, SettingsConfigDict\n\nclass Settings(BaseSettings):\n    model_config = SettingsConfigDict(\n        env_file=\".env\",\n        case_sensitive=False,\n    )\n\n    # Application\n    app_name: str = \"myproject\"\n    debug: bool = False\n    environment: Literal[\"development\", \"staging\", \"production\"] = \"development\"\n\n    # Logging\n    log_level: Literal[\"DEBUG\", \"INFO\", \"WARNING\", \"ERROR\", \"CRITICAL\"] = \"INFO\"\n    log_format: Literal[\"json\", \"console\"] = \"console\"\n\n    # Server\n    host: str = \"127.0.0.1\"\n    port: int = 8000\n\n    # Database\n    database_url: str = \"postgresql+asyncpg://postgres:postgres@localhost:5432/myproject\"\n\n    # Security\n    secret_key: str = \"CHANGE-ME-IN-PRODUCTION-USE-SECRETS-TOKEN\"\n    access_token_expire_minutes: int = 30\n\n    # CORS\n    cors_origins: list[str] = [\"http://localhost:3000\"]\n\nsettings = Settings()\n</code></pre>"},{"location":"project-structure/#dbdatabasepy","title":"<code>db/database.py</code>","text":"<p>Async SQLAlchemy setup with session management:</p> <pre><code>from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker, DeclarativeBase\n\nengine = create_async_engine(settings.database_url)\nAsyncSessionLocal = sessionmaker(engine, class_=AsyncSession, expire_on_commit=False)\n\nclass Base(DeclarativeBase):\n    pass\n\nasync def get_db():\n    async with AsyncSessionLocal() as session:\n        yield session\n</code></pre>"},{"location":"project-structure/#coreloggingpy","title":"<code>core/logging.py</code>","text":"<p>Structured logging with JSON and console output:</p> <pre><code>from core.logging import configure_logging, get_logger\n\nconfigure_logging(level=\"INFO\", format=\"json\")\nlogger = get_logger(__name__)\n\nlogger.info(\"Request processed\", user_id=123, status=\"success\")\n</code></pre>"},{"location":"project-structure/#coreexceptionspy","title":"<code>core/exceptions.py</code>","text":"<p>Custom exception classes and handlers:</p> <pre><code>from core.exceptions import NotFoundError, ValidationError\n\n# Raise custom exceptions in your code\nraise NotFoundError(\"User not found\")\nraise ValidationError(\"Invalid email format\")\n</code></pre>"},{"location":"project-structure/#coredependenciespy","title":"<code>core/dependencies.py</code>","text":"<p>FastAPI dependencies for common patterns:</p> <pre><code>from core.dependencies import get_db, PaginationParams\n\n@router.get(\"/items\")\nasync def list_items(\n    db: AsyncSession = Depends(get_db),\n    pagination: PaginationParams = Depends(),\n):\n    ...\n</code></pre>"},{"location":"project-structure/#feature-structure","title":"Feature Structure","text":"<p>Each feature in <code>features/</code> follows this structure:</p> <pre><code>features/&lt;name&gt;/\n\u251c\u2500\u2500 __init__.py      # Feature exports\n\u251c\u2500\u2500 config.py        # Router configuration\n\u251c\u2500\u2500 models.py        # SQLAlchemy models\n\u251c\u2500\u2500 schemas.py       # Pydantic schemas\n\u251c\u2500\u2500 services.py      # Business logic\n\u2514\u2500\u2500 routes.py        # API endpoints\n</code></pre>"},{"location":"project-structure/#configpy","title":"<code>config.py</code>","text":"<p>Defines the router prefix and OpenAPI tags:</p> <pre><code>from dataclasses import dataclass, field\n\n@dataclass\nclass FeatureConfig:\n    prefix: str = \"/users\"\n    tags: list[str] = field(default_factory=lambda: [\"Users\"])\n</code></pre>"},{"location":"project-structure/#modelspy","title":"<code>models.py</code>","text":"<p>SQLAlchemy models using modern mapped column syntax:</p> <pre><code>from sqlalchemy import String\nfrom sqlalchemy.orm import Mapped, mapped_column\nfrom db.database import Base\n\nclass User(Base):\n    __tablename__ = \"users\"\n\n    id: Mapped[int] = mapped_column(primary_key=True)\n    email: Mapped[str] = mapped_column(String(255), unique=True)\n    name: Mapped[str | None] = mapped_column(String(100))\n</code></pre>"},{"location":"project-structure/#schemaspy","title":"<code>schemas.py</code>","text":"<p>Pydantic schemas for request/response validation:</p> <pre><code>from pydantic import BaseModel, EmailStr\n\nclass UserCreate(BaseModel):\n    email: EmailStr\n    name: str | None = None\n\nclass UserResponse(BaseModel):\n    id: int\n    email: str\n    name: str | None\n\n    model_config = {\"from_attributes\": True}\n</code></pre>"},{"location":"project-structure/#servicespy","title":"<code>services.py</code>","text":"<p>Business logic layer with async functions:</p> <pre><code>from sqlalchemy import select\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom .models import User\nfrom .schemas import UserCreate\n\nasync def create_user(db: AsyncSession, data: UserCreate) -&gt; User:\n    user = User(**data.model_dump())\n    db.add(user)\n    await db.commit()\n    await db.refresh(user)\n    return user\n\nasync def get_user(db: AsyncSession, user_id: int) -&gt; User | None:\n    result = await db.execute(select(User).where(User.id == user_id))\n    return result.scalar_one_or_none()\n</code></pre>"},{"location":"project-structure/#routespy","title":"<code>routes.py</code>","text":"<p>FastAPI router with endpoints delegating to services:</p> <pre><code>from fastapi import APIRouter, Depends, HTTPException\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom core.dependencies import get_db\nfrom . import services, schemas\n\nrouter = APIRouter()\n\n@router.post(\"/\", response_model=schemas.UserResponse, status_code=201)\nasync def create_user(\n    data: schemas.UserCreate,\n    db: AsyncSession = Depends(get_db),\n):\n    return await services.create_user(db, data)\n\n@router.get(\"/{user_id}\", response_model=schemas.UserResponse)\nasync def get_user(\n    user_id: int,\n    db: AsyncSession = Depends(get_db),\n):\n    user = await services.get_user(db, user_id)\n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    return user\n</code></pre>"},{"location":"project-structure/#directory-conventions","title":"Directory Conventions","text":"Directory Purpose <code>core/</code> Shared utilities, middleware, dependencies, schemas <code>db/</code> Database configuration, models base, migrations <code>features/</code> Domain features (business logic organized by capability) <code>e2e/</code> End-to-end API tests <code>deploy/</code> Deployment configurations (added via <code>paxx deploy add</code>)"},{"location":"project-structure/#registering-features","title":"Registering Features","text":""},{"location":"project-structure/#manual-registration","title":"Manual Registration","text":"<p>After creating a feature with <code>paxx feature create</code>, register it in <code>main.py</code>:</p> <pre><code>from features.users.routes import router as users_router\nfrom features.users.config import FeatureConfig as UsersConfig\n\ndef create_app() -&gt; FastAPI:\n    app = FastAPI()\n\n    users_config = UsersConfig()\n    app.include_router(\n        users_router,\n        prefix=users_config.prefix,\n        tags=users_config.tags,\n    )\n\n    return app\n</code></pre>"},{"location":"project-structure/#automatic-registration","title":"Automatic Registration","text":"<p>When using <code>paxx feature add</code> with bundled features, the router is automatically registered in <code>main.py</code> using AST parsing.</p>"},{"location":"project-structure/#environment-variables","title":"Environment Variables","text":"<p>Key environment variables configured in <code>.env</code>:</p> Variable Description Default <code>APP_NAME</code> Application name Project name <code>DEBUG</code> Enable debug mode <code>false</code> <code>ENVIRONMENT</code> Environment type <code>development</code> <code>LOG_LEVEL</code> Logging level <code>INFO</code> <code>LOG_FORMAT</code> Log format (json/console) <code>console</code> <code>DATABASE_URL</code> PostgreSQL connection string Local postgres <code>SECRET_KEY</code> JWT signing key Must change in production <code>CORS_ORIGINS</code> Allowed CORS origins <code>[\"http://localhost:3000\"]</code>"},{"location":"project-structure/#next-steps","title":"Next Steps","text":"<p>Follow the Tutorial to build a complete feature.</p> <p>If you already know how to build features, you can skip the tutorial and add the pre-built example:</p> <pre><code>uv run paxx feature add example_products\n</code></pre> <p>This adds a complete products feature with:</p> <ul> <li>Full CRUD implementation</li> <li>E2E tests included</li> <li>Automatic router registration</li> </ul>"},{"location":"tutorial/","title":"Tutorial: Building a Products Feature","text":"<p>This tutorial walks through creating a complete CRUD feature for managing products.</p>"},{"location":"tutorial/#prerequisites","title":"Prerequisites","text":"<ul> <li>A paxx project created with <code>paxx bootstrap</code></li> <li>Development environment running (<code>docker compose up</code> or local setup)</li> </ul>"},{"location":"tutorial/#step-1-create-the-feature","title":"Step 1: Create the Feature","text":"<pre><code>uv run paxx feature create products --description \"Product catalog management\"\n</code></pre> <p>This creates <code>features/products/</code> with all the necessary files.</p>"},{"location":"tutorial/#step-2-define-the-model","title":"Step 2: Define the Model","text":"<p>Edit <code>features/products/models.py</code>:</p> <pre><code>from datetime import datetime\n\nfrom sqlalchemy import String, Text\nfrom sqlalchemy.orm import Mapped, mapped_column\n\nfrom db.database import Base\n\n\nclass Product(Base):\n    __tablename__ = \"products\"\n\n    id: Mapped[int] = mapped_column(primary_key=True)\n    name: Mapped[str] = mapped_column(String(255))\n    description: Mapped[str | None] = mapped_column(Text)\n    price: Mapped[float]\n    sku: Mapped[str] = mapped_column(String(50), unique=True)\n    created_at: Mapped[datetime] = mapped_column(default=datetime.utcnow)\n    updated_at: Mapped[datetime | None] = mapped_column(onupdate=datetime.utcnow)\n</code></pre>"},{"location":"tutorial/#step-3-create-the-schemas","title":"Step 3: Create the Schemas","text":"<p>Edit <code>features/products/schemas.py</code>:</p> <pre><code>from datetime import datetime\n\nfrom pydantic import BaseModel, Field\n\n\nclass ProductBase(BaseModel):\n    name: str = Field(..., min_length=1, max_length=255)\n    description: str | None = None\n    price: float = Field(..., gt=0)\n    sku: str = Field(..., min_length=1, max_length=50)\n\n\nclass ProductCreate(ProductBase):\n    pass\n\n\nclass ProductUpdate(BaseModel):\n    name: str | None = Field(None, min_length=1, max_length=255)\n    description: str | None = None\n    price: float | None = Field(None, gt=0)\n\n\nclass ProductResponse(ProductBase):\n    id: int\n    created_at: datetime\n    updated_at: datetime | None\n\n    model_config = {\"from_attributes\": True}\n</code></pre>"},{"location":"tutorial/#step-4-implement-the-services","title":"Step 4: Implement the Services","text":"<p>Edit <code>features/products/services.py</code>:</p> <pre><code>from sqlalchemy import select\nfrom sqlalchemy.ext.asyncio import AsyncSession\n\nfrom .models import Product\nfrom .schemas import ProductCreate, ProductUpdate\n\n\nasync def get_products(\n    db: AsyncSession,\n    skip: int = 0,\n    limit: int = 100,\n) -&gt; list[Product]:\n    result = await db.execute(\n        select(Product).offset(skip).limit(limit)\n    )\n    return list(result.scalars().all())\n\n\nasync def get_product(db: AsyncSession, product_id: int) -&gt; Product | None:\n    result = await db.execute(\n        select(Product).where(Product.id == product_id)\n    )\n    return result.scalar_one_or_none()\n\n\nasync def get_product_by_sku(db: AsyncSession, sku: str) -&gt; Product | None:\n    result = await db.execute(\n        select(Product).where(Product.sku == sku)\n    )\n    return result.scalar_one_or_none()\n\n\nasync def create_product(db: AsyncSession, data: ProductCreate) -&gt; Product:\n    product = Product(**data.model_dump())\n    db.add(product)\n    await db.commit()\n    await db.refresh(product)\n    return product\n\n\nasync def update_product(\n    db: AsyncSession,\n    product: Product,\n    data: ProductUpdate,\n) -&gt; Product:\n    update_data = data.model_dump(exclude_unset=True)\n    for field, value in update_data.items():\n        setattr(product, field, value)\n    await db.commit()\n    await db.refresh(product)\n    return product\n\n\nasync def delete_product(db: AsyncSession, product: Product) -&gt; None:\n    await db.delete(product)\n    await db.commit()\n</code></pre>"},{"location":"tutorial/#step-5-create-the-routes","title":"Step 5: Create the Routes","text":"<p>Edit <code>features/products/routes.py</code>:</p> <pre><code>from fastapi import APIRouter, Depends, HTTPException, status\nfrom sqlalchemy.ext.asyncio import AsyncSession\n\nfrom core.dependencies import get_db\n\nfrom . import services\nfrom .schemas import ProductCreate, ProductResponse, ProductUpdate\n\nrouter = APIRouter()\n\n\n@router.get(\"/\", response_model=list[ProductResponse])\nasync def list_products(\n    skip: int = 0,\n    limit: int = 100,\n    db: AsyncSession = Depends(get_db),\n):\n    \"\"\"List all products.\"\"\"\n    return await services.get_products(db, skip=skip, limit=limit)\n\n\n@router.post(\n    \"/\",\n    response_model=ProductResponse,\n    status_code=status.HTTP_201_CREATED,\n)\nasync def create_product(\n    data: ProductCreate,\n    db: AsyncSession = Depends(get_db),\n):\n    \"\"\"Create a new product.\"\"\"\n    existing = await services.get_product_by_sku(db, data.sku)\n    if existing:\n        raise HTTPException(\n            status_code=status.HTTP_400_BAD_REQUEST,\n            detail=\"Product with this SKU already exists\",\n        )\n    return await services.create_product(db, data)\n\n\n@router.get(\"/{product_id}\", response_model=ProductResponse)\nasync def get_product(\n    product_id: int,\n    db: AsyncSession = Depends(get_db),\n):\n    \"\"\"Get a product by ID.\"\"\"\n    product = await services.get_product(db, product_id)\n    if not product:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND,\n            detail=\"Product not found\",\n        )\n    return product\n\n\n@router.patch(\"/{product_id}\", response_model=ProductResponse)\nasync def update_product(\n    product_id: int,\n    data: ProductUpdate,\n    db: AsyncSession = Depends(get_db),\n):\n    \"\"\"Update a product.\"\"\"\n    product = await services.get_product(db, product_id)\n    if not product:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND,\n            detail=\"Product not found\",\n        )\n    return await services.update_product(db, product, data)\n\n\n@router.delete(\"/{product_id}\", status_code=status.HTTP_204_NO_CONTENT)\nasync def delete_product(\n    product_id: int,\n    db: AsyncSession = Depends(get_db),\n):\n    \"\"\"Delete a product.\"\"\"\n    product = await services.get_product(db, product_id)\n    if not product:\n        raise HTTPException(\n            status_code=status.HTTP_404_NOT_FOUND,\n            detail=\"Product not found\",\n        )\n    await services.delete_product(db, product)\n</code></pre>"},{"location":"tutorial/#step-6-update-the-config","title":"Step 6: Update the Config","text":"<p>Edit <code>features/products/config.py</code>:</p> <pre><code>from dataclasses import dataclass, field\n\n\n@dataclass\nclass FeatureConfig:\n    prefix: str = \"/products\"\n    tags: list[str] = field(default_factory=lambda: [\"Products\"])\n</code></pre>"},{"location":"tutorial/#step-7-register-the-router","title":"Step 7: Register the Router","text":"<p>Add to <code>main.py</code>:</p> <pre><code>from features.products.routes import router as products_router\nfrom features.products.config import FeatureConfig as ProductsConfig\n\ndef create_app() -&gt; FastAPI:\n    app = FastAPI(...)\n\n    # ... existing code ...\n\n    # Register products router\n    products_config = ProductsConfig()\n    app.include_router(\n        products_router,\n        prefix=products_config.prefix,\n        tags=products_config.tags,\n    )\n\n    return app\n</code></pre>"},{"location":"tutorial/#step-8-create-and-apply-migrations","title":"Step 8: Create and Apply Migrations","text":"<pre><code># Create the migration\nuv run paxx db migrate \"add products table\"\n\n# Apply it\nuv run paxx db upgrade\n</code></pre>"},{"location":"tutorial/#step-9-test-your-api","title":"Step 9: Test Your API","text":"<p>Start the server:</p> <pre><code>uv run paxx start\n</code></pre> <p>Visit http://127.0.0.1:8000/docs to test your endpoints:</p> <ol> <li>POST /products/ - Create a product</li> <li>GET /products/ - List all products</li> <li>GET /products/{id} - Get a specific product</li> <li>PATCH /products/{id} - Update a product</li> <li>DELETE /products/{id} - Delete a product</li> </ol>"},{"location":"tutorial/#example-requests","title":"Example Requests","text":""},{"location":"tutorial/#create-a-product","title":"Create a Product","text":"<pre><code>curl -X POST http://127.0.0.1:8000/products/ \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Widget\", \"price\": 29.99, \"sku\": \"WDG-001\"}'\n</code></pre>"},{"location":"tutorial/#list-products","title":"List Products","text":"<pre><code>curl http://127.0.0.1:8000/products/\n</code></pre>"},{"location":"tutorial/#get-a-product","title":"Get a Product","text":"<pre><code>curl http://127.0.0.1:8000/products/1\n</code></pre>"},{"location":"tutorial/#update-a-product","title":"Update a Product","text":"<pre><code>curl -X PATCH http://127.0.0.1:8000/products/1 \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"price\": 24.99}'\n</code></pre>"},{"location":"tutorial/#delete-a-product","title":"Delete a Product","text":"<pre><code>curl -X DELETE http://127.0.0.1:8000/products/1\n</code></pre>"},{"location":"tutorial/#writing-tests","title":"Writing Tests","text":"<p>Create <code>e2e/test_products.py</code>:</p> <pre><code>import pytest\nfrom httpx import AsyncClient\n\n\n@pytest.mark.asyncio\nasync def test_create_product(client: AsyncClient):\n    response = await client.post(\n        \"/products/\",\n        json={\"name\": \"Test Product\", \"price\": 19.99, \"sku\": \"TEST-001\"},\n    )\n    assert response.status_code == 201\n    data = response.json()\n    assert data[\"name\"] == \"Test Product\"\n    assert data[\"sku\"] == \"TEST-001\"\n\n\n@pytest.mark.asyncio\nasync def test_get_product(client: AsyncClient):\n    # First create a product\n    create_response = await client.post(\n        \"/products/\",\n        json={\"name\": \"Test Product\", \"price\": 19.99, \"sku\": \"TEST-002\"},\n    )\n    product_id = create_response.json()[\"id\"]\n\n    # Then fetch it\n    response = await client.get(f\"/products/{product_id}\")\n    assert response.status_code == 200\n    assert response.json()[\"id\"] == product_id\n\n\n@pytest.mark.asyncio\nasync def test_product_not_found(client: AsyncClient):\n    response = await client.get(\"/products/99999\")\n    assert response.status_code == 404\n</code></pre> <p>Run tests:</p> <pre><code>uv run pytest e2e/test_products.py -v\n</code></pre>"},{"location":"tutorial/#next-steps","title":"Next Steps","text":"<ul> <li>Add additional Infrastructure like storage, caching, etc.</li> <li>Extend exisitng app with websockets support, postGIS and more</li> </ul>"}]}